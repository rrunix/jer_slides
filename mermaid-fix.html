<script>
// Override Quarto's Mermaid responsive behavior to prevent pagination
window.addEventListener('load', function() {
  // Wait for Quarto's mermaid initialization to complete
  setTimeout(function() {
    // Override the makeResponsive function to do nothing
    if (window._quartoMermaid) {
      window._quartoMermaid.makeResponsive = function(svg) {
        // Do nothing - prevent responsive behavior that causes pagination
      };
      
      // Override setSvgSize to not restrict sizes
      window._quartoMermaid.setSvgSize = function(svg) {
        // Remove any size restrictions
        svg.style.maxWidth = 'none';
        svg.style.maxHeight = 'none';
        svg.style.width = 'auto';
        svg.style.height = 'auto';
        
        // Force the slide section to allow overflow for this diagram
        const section = svg.closest('section');
        if (section) {
          section.style.overflow = 'visible';
          section.style.height = 'auto';
          section.style.minHeight = '100vh';
        }
        
        // Force parent containers to allow full height
        let parent = svg.parentElement;
        while (parent && !parent.classList.contains('reveal')) {
          parent.style.maxHeight = 'none';
          parent.style.height = 'auto';
          parent.style.overflow = 'visible';
          parent = parent.parentElement;
        }
      };
      
      // Reprocess all existing mermaid diagrams
      const mermaidSvgs = document.querySelectorAll('svg.mermaid-js');
      mermaidSvgs.forEach(svg => {
        svg.style.maxWidth = 'none';
        svg.style.maxHeight = 'none';
        svg.style.width = 'auto';
        svg.style.height = 'auto';
        
        // Remove any width/height attributes that might cause pagination
        svg.removeAttribute('width');
        svg.removeAttribute('height');
        
        // Force containers to allow full height
        const section = svg.closest('section');
        if (section) {
          section.style.overflow = 'visible';
          section.style.height = 'auto';
          section.style.minHeight = '100vh';
        }
        
        let parent = svg.parentElement;
        while (parent && !parent.classList.contains('reveal')) {
          parent.style.maxHeight = 'none';
          parent.style.height = 'auto';
          parent.style.overflow = 'visible';
          parent = parent.parentElement;
        }
      });
    }
  }, 1000);
}, false);
</script>

<style>
/* Additional CSS to ensure Mermaid diagrams are not restricted */
.mermaid, .mermaid svg, svg.mermaid-js {
  max-width: none !important;
  max-height: none !important;
  width: auto !important;
  height: auto !important;
  overflow: visible !important;
}

/* Ensure containers don't restrict Mermaid */
.cell-output-display .mermaid,
.reveal .slides section .mermaid {
  max-width: none !important;
  max-height: none !important;
  overflow: visible !important;
}

/* Force sections with Mermaid to allow overflow and full height */
.reveal .slides section:has(.mermaid),
.reveal .slides section:has(svg.mermaid-js) {
  overflow: visible !important;
  height: auto !important;
  min-height: 100vh !important;
}

/* Remove height restrictions from all parent containers of Mermaid */
.reveal .slides section .cell-output-display:has(.mermaid),
.reveal .slides section .cell-output-display:has(svg.mermaid-js),
.reveal .slides section .cell:has(.mermaid),
.reveal .slides section .cell:has(svg.mermaid-js) {
  max-height: none !important;
  height: auto !important;
  overflow: visible !important;
}

/* Ensure the reveal slides container itself doesn't restrict height */
.reveal .slides {
  overflow: visible !important;
}
</style>